{"remainingRequest":"/Users/hirog/Desktop/portfolio/vue_accountBook/account-book02/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hirog/Desktop/portfolio/vue_accountBook/account-book02/src/components/ItemDialog.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hirog/Desktop/portfolio/vue_accountBook/account-book02/src/components/ItemDialog.vue","mtime":1644138060011},{"path":"/Users/hirog/Desktop/portfolio/vue_accountBook/account-book02/node_modules/cache-loader/dist/cjs.js","mtime":1644038724659},{"path":"/Users/hirog/Desktop/portfolio/vue_accountBook/account-book02/node_modules/babel-loader/lib/index.js","mtime":1644038724176},{"path":"/Users/hirog/Desktop/portfolio/vue_accountBook/account-book02/node_modules/cache-loader/dist/cjs.js","mtime":1644038724659},{"path":"/Users/hirog/Desktop/portfolio/vue_accountBook/account-book02/node_modules/vue-loader/lib/index.js","mtime":1644038728759}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEFjdGlvbnMsIG1hcEdldHRlcnMgfSBmcm9tICd2dWV4JwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0l0ZW1EaWFsb2cnLAogIGRhdGEgKCkgewogICAgcmV0dXJuIHsKICAgICAgLyoqIGRlZmF1bHQgZGlhbG9nIHNpdHVhdGlvbiAqLwogICAgICBzaG93OiBmYWxzZSwKICAgICAgLyoqIGNoZWNrIHRoZSBpbnB1dCBkYXRhIGlzIHZhbGlkICovCiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgLyoqIGRhdGUgc2VsZWN0aW9uIG1lbnUgc2l0dWF0aW9uICovCiAgICAgIG1lbnU6IGZhbHNlLAogICAgICAvKiogbG9hZGluZyBzaXR1YXRpb24gKi8KICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgIC8qKiBtYW5pcHVsYXRlIHNpdHVhdGlvbiAnYWRkJyBvciAnZWRpdCcgKi8KICAgICAgYWN0aW9uVHlwZTogJ2FkZCcsCiAgICAgIC8qKiBpZCAqLwogICAgICBpZDogJycsCiAgICAgIC8qKiBkYXRlICovCiAgICAgIGRhdGU6ICcnLAogICAgICAvKiogdGl0bGUgKi8KICAgICAgdGl0bGU6ICcnLAogICAgICAvKiogYmFsYW5jZSAnaW5jb21lJyBvciAnb3V0Z28nICovCiAgICAgIGlub3V0OiAnJywKICAgICAgLyoqIGNhdGFnb3J5ICovCiAgICAgIGNhdGVnb3J5OiAnJywKICAgICAgLyoqIHRhZyAqLwogICAgICB0YWdzOiBbXSwKICAgICAgLyoqIGFtb3VudCAqLwogICAgICBhbW91bnQ6IDAsCiAgICAgIC8qKiBtZW1vICovCiAgICAgIG1lbW86ICcnLAogICAgICAvKiogY2F0ZWdvcnkgbGlzdCAqLwogICAgICBpbmNvbWVJdGVtczogWydjYXRlZ29yeTEnLCAnY2F0ZWdvcnkyJ10sCiAgICAgIG91dGdvSXRlbXM6IFsnY2F0ZWdvcnkzJywgJ2NhdGVnb3J5NCddLAogICAgICAvKiogY2F0ZWdvcnkgbGlzdCAqLwogICAgICBjYXRlZ29yeUl0ZW1zOiBbXSwKICAgICAgLyoqIHRhZyBsaXN0ICovCiAgICAgIHRhZ0l0ZW1zOiBbJ3RhZzEnLCAndGFnMiddLAogICAgICAvKiogb3JpZ2luYWwgZGF0Ze+8iHVzaW5nIGF0IGVkaXRpbmcgbW9kZe+8iSAqLwogICAgICBiZWZvcmVZTTogJycsCiAgICAgIC8qKiB2YWxpZGF0aW9uIHJ1bGUgKi8KICAgICAgdGl0bGVSdWxlczogWwogICAgICAgIHYgPT4gdi50cmltKCkubGVuZ3RoID4gMCB8fCAnVGl0bGUgaXMgcmVxdWlyZWQuJywKICAgICAgICB2ID0+IHYubGVuZ3RoIDw9IDIwIHx8ICdMZXNzIHRoYW4gMjAgY2hhcmFjdGVycycKICAgICAgXSwKICAgICAgdGFnUnVsZTogdiA9PiB2Lmxlbmd0aCA8PSA1IHx8ICc1IHRhZ3MgYXJlIG1heGltdW0uJywKICAgICAgYW1vdW50UnVsZXM6IFsKICAgICAgICB2ID0+IHYgPj0gMCB8fCAnTmVlZCB0byBiZSBtb3JlIHRoYW4gMCcsCiAgICAgICAgdiA9PiBOdW1iZXIuaXNJbnRlZ2VyKHYpIHx8ICdOZWVkIHRvIGJlIGludGVnZXInCiAgICAgIF0sCiAgICAgIG1lbW9SdWxlOiB2ID0+IHYubGVuZ3RoIDw9IDUwIHx8ICdMZXNzIHRoYW4gNTAgY2hhcmFjdGVycycKICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICAuLi5tYXBHZXR0ZXJzKFsKICAgICAgLyoqIGluY29tZSBjYXRlZ29yeSAqLwogICAgICAnaW5jb21lSXRlbXMnLAogICAgICAnb3V0Z29JdGVtcycsCiAgICAgIC8qKiB0YWcgKi8KICAgICAgJ3RhZ0l0ZW1zJwogICAgXSksCiAgICAvKiogZGlhbG9nIHRpdGxlICovCiAgICB0aXRsZVRleHQgKCkgewogICAgICByZXR1cm4gdGhpcy5hY3Rpb25UeXBlID09PSAnYWRkJyA/ICdBZGQnIDogJ0VkaXQnCiAgICB9LAogICAgLyoqIGRpYWxvZyBhY3Rpb24gKi8KICAgIGFjdGlvblRleHQgKCkgewogICAgICByZXR1cm4gdGhpcy5hY3Rpb25UeXBlID09PSAnYWRkJyA/ICdBZGQnIDogJ2VkaXQnCiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICAuLi5tYXBBY3Rpb25zKFsKICAgICAgLyoqIGFkZCBkYXRhICovCiAgICAgICdhZGRBYkRhdGEnLAogICAgICAvKiogdXBkYXRlIGRhdGEgKi8KICAgICAgJ3VwZGF0ZUFiRGF0YScKICAgIF0pLAogICAgLyoqCiAgICAgKiBTaG93IHRoZSBkaWFsb2cKICAgICAqIFRoaXMgbWV0aG9kIGlzIGNhbGxlZCBieSB0aGUgcGFyZW50CiAgICAgKi8KICAgIG9wZW4gKGFjdGlvblR5cGUsIGl0ZW0pIHsKICAgICAgdGhpcy5zaG93ID0gdHJ1ZQogICAgICB0aGlzLmFjdGlvblR5cGUgPSBhY3Rpb25UeXBlCiAgICAgIHRoaXMucmVzZXRGb3JtKGl0ZW0pCiAgICAgIGlmIChhY3Rpb25UeXBlID09PSAnZWRpdCcpIHsKICAgICAgICB0aGlzLmJlZm9yZVlNID0gaXRlbS5kYXRlLnNsaWNlKDAsIDcpCiAgICAgIH0KICAgIH0sCiAgICAvKiogVG8gY2FuY2VsICovCiAgICBvbkNsaWNrQ2xvc2UgKCkgewogICAgICB0aGlzLnNob3cgPSBmYWxzZQogICAgfSwKICAgIC8qKiBUbyBhZGQgb3IgZWRpdCAqLwogICAgb25DbGlja0FjdGlvbiAoKSB7CiAgICAgIGNvbnN0IGl0ZW0gPSB7CiAgICAgICAgZGF0ZTogdGhpcy5kYXRlLAogICAgICAgIHRpdGxlOiB0aGlzLnRpdGxlLAogICAgICAgIGNhdGVnb3J5OiB0aGlzLmNhdGVnb3J5LAogICAgICAgIHRhZ3M6IHRoaXMudGFncy5qb2luKCcsJyksCiAgICAgICAgbWVtbzogdGhpcy5tZW1vLAogICAgICAgIGluY29tZTogbnVsbCwKICAgICAgICBvdXRnbzogbnVsbAogICAgICB9CiAgICAgIGl0ZW1bdGhpcy5pbm91dF0gPSB0aGlzLmFtb3VudCB8fCAwCiAgICAgIGlmICh0aGlzLmFjdGlvblR5cGUgPT09ICdhZGQnKSB7CiAgICAgICAgaXRlbS5pZCA9IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnNsaWNlKC04KSAvLyDjg6njg7Pjg4Djg6Djgao45paH5a2X44GuSUTjgpLnlJ/miJAKICAgICAgICB0aGlzLmFkZEFiRGF0YSh7IGl0ZW0gfSkKICAgICAgfSBlbHNlIHsKICAgICAgICBpdGVtLmlkID0gdGhpcy5pZAogICAgICAgIHRoaXMudXBkYXRlQWJEYXRhKHsgYmVmb3JlWU06IHRoaXMuYmVmb3JlWU0sIGl0ZW0gfSkKICAgICAgfQogICAgICB0aGlzLnNob3cgPSBmYWxzZQogICAgfSwKICAgIC8qKiBpZiBjaGFuZ2UgdGhlIGJhbGFuY2UgKi8KICAgIG9uQ2hhbmdlSW5vdXQgKCkgewogICAgICBpZiAodGhpcy5pbm91dCA9PT0gJ2luY29tZScpIHsKICAgICAgICB0aGlzLmNhdGVnb3J5SXRlbXMgPSB0aGlzLmluY29tZUl0ZW1zCiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5jYXRlZ29yeUl0ZW1zID0gdGhpcy5vdXRnb0l0ZW1zCiAgICAgIH0KICAgICAgdGhpcy5jYXRlZ29yeSA9IHRoaXMuY2F0ZWdvcnlJdGVtc1swXQogICAgfSwKICAgIC8qKiBpbml0aWFsaXplIHRoZSBmb3JtICovCiAgICByZXNldEZvcm0gKGl0ZW0gPSB7fSkgewogICAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCkKICAgICAgY29uc3QgeWVhciA9IHRvZGF5LmdldEZ1bGxZZWFyKCkKICAgICAgY29uc3QgbW9udGggPSAoJzAnICsgKHRvZGF5LmdldE1vbnRoKCkgKyAxKSkuc2xpY2UoLTIpCiAgICAgIGNvbnN0IGRhdGUgPSAoJzAnICsgdG9kYXkuZ2V0RGF0ZSgpKS5zbGljZSgtMikKICAgICAgdGhpcy5pZCA9IGl0ZW0uaWQgfHwgJycKICAgICAgdGhpcy5kYXRlID0gaXRlbS5kYXRlIHx8IGAke3llYXJ9LSR7bW9udGh9LSR7ZGF0ZX1gCiAgICAgIHRoaXMudGl0bGUgPSBpdGVtLnRpdGxlIHx8ICcnCiAgICAgIHRoaXMuaW5vdXQgPSBpdGVtLmluY29tZSAhPSBudWxsID8gJ2luY29tZScgOiAnb3V0Z28nCiAgICAgIGlmICh0aGlzLmlub3V0ID09PSAnaW5jb21lJykgewogICAgICAgIHRoaXMuY2F0ZWdvcnlJdGVtcyA9IHRoaXMuaW5jb21lSXRlbXMKICAgICAgICB0aGlzLmFtb3VudCA9IGl0ZW0uaW5jb21lIHx8IDAKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmNhdGVnb3J5SXRlbXMgPSB0aGlzLm91dGdvSXRlbXMKICAgICAgICB0aGlzLmFtb3VudCA9IGl0ZW0ub3V0Z28gfHwgMAogICAgICB9CiAgICAgIHRoaXMuY2F0ZWdvcnkgPSBpdGVtLmNhdGVnb3J5IHx8IHRoaXMuY2F0ZWdvcnlJdGVtc1swXQogICAgICB0aGlzLnRhZ3MgPSBpdGVtLnRhZ3MgPyBpdGVtLnRhZ3Muc3BsaXQoJywnKSA6IFtdCiAgICAgIHRoaXMubWVtbyA9IGl0ZW0ubWVtbyB8fCAnJwogICAgICB0aGlzLiRyZWZzLmZvcm0ucmVzZXRWYWxpZGF0aW9uKCkKICAgIH0KICB9Cn0K"},{"version":3,"sources":["ItemDialog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ItemDialog.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <!-- add／edit dialog -->\n  <v-dialog\n    v-model=\"show\"\n    scrollable\n    persistent\n    max-width=\"500px\"\n    eager\n  >\n    <v-card>\n      <v-card-title>{{ titleText }}</v-card-title>\n      <v-divider/>\n      <v-card-text>\n        <v-form ref=\"form\" v-model=\"valid\">\n          <!-- select date -->\n          <v-menu\n            ref=\"menu\"\n            v-model=\"menu\"\n            :close-on-content-click=\"false\"\n            :return-value.sync=\"date\"\n            transition=\"scale-transition\"\n            offset-y\n            max-width=\"290px\"\n            min-width=\"290px\"\n          >\n            <template v-slot:activator=\"{ on }\">\n              <v-text-field\n                v-model=\"date\"\n                prepend-icon=\"mdi-calendar\"\n                readonly\n                v-on=\"on\"\n                hide-details\n              />\n            </template>\n            <v-date-picker\n              v-model=\"date\"\n              color=\"green\"\n              locale=\"ja-jp\"\n              :day-format=\"date => new Date(date).getDate()\"\n              no-title\n              scrollable\n            >\n              <v-spacer/>\n              <v-btn text color=\"grey\" @click=\"menu = false\">Cancel</v-btn>\n              <v-btn text color=\"primary\" @click=\"$refs.menu.save(date)\">Select</v-btn>\n            </v-date-picker>\n          </v-menu>\n          <!-- title -->\n          <v-text-field\n            label=\"title\"\n            v-model.trim=\"title\"\n            :counter=\"20\"\n            :rules=\"titleRules\"\n          />\n          <!-- balance -->\n          <v-radio-group\n            row\n            v-model=\"inout\"\n            hide-details\n            @change=\"onChangeInout\"\n          >\n            <v-radio label=\"income\" value=\"income\"/>\n            <v-radio label=\"expense\" value=\"outgo\"/>\n          </v-radio-group>\n          <!-- category -->\n          <v-select\n            label=\"category\"\n            v-model=\"category\"\n            :items=\"categoryItems\"\n            hide-details\n          />\n          <!-- tag -->\n          <v-select\n            label=\"tag\"\n            v-model=\"tags\"\n            :items=\"tagItems\"\n            multiple\n            chips\n            :rules=\"[tagRule]\"\n          />\n          <!-- amount -->\n          <v-text-field\n            label=\"amount\"\n            v-model.number=\"amount\"\n            prefix=\"￥\"\n            pattern=\"[0-9]*\"\n            :rules=\"amountRules\"\n          />\n          <!-- memo -->\n          <v-text-field\n            label=\"memo\"\n            v-model=\"memo\"\n            :counter=\"50\"\n            :rules=\"[memoRule]\"\n          />\n        </v-form>\n      </v-card-text>\n      <v-divider/>\n      <v-card-actions>\n        <v-spacer/>\n        <v-btn\n          color=\"grey darken-1\"\n          text\n          :disabled=\"loading\"\n          @click=\"onClickClose\"\n        >\n          cancel\n        </v-btn>\n        <v-btn\n          color=\"blue darken-1\"\n          text\n          :disabled=\"!valid\"\n          :loading=\"loading\"\n          @click=\"onClickAction\"\n        >\n          {{ actionText }}\n        </v-btn>\n      </v-card-actions>\n    </v-card>\n  </v-dialog>\n</template>\n<script>\nimport { mapActions, mapGetters } from 'vuex'\nexport default {\n  name: 'ItemDialog',\n  data () {\n    return {\n      /** default dialog situation */\n      show: false,\n      /** check the input data is valid */\n      valid: false,\n      /** date selection menu situation */\n      menu: false,\n      /** loading situation */\n      loading: false,\n      /** manipulate situation 'add' or 'edit' */\n      actionType: 'add',\n      /** id */\n      id: '',\n      /** date */\n      date: '',\n      /** title */\n      title: '',\n      /** balance 'income' or 'outgo' */\n      inout: '',\n      /** catagory */\n      category: '',\n      /** tag */\n      tags: [],\n      /** amount */\n      amount: 0,\n      /** memo */\n      memo: '',\n      /** category list */\n      incomeItems: ['category1', 'category2'],\n      outgoItems: ['category3', 'category4'],\n      /** category list */\n      categoryItems: [],\n      /** tag list */\n      tagItems: ['tag1', 'tag2'],\n      /** original date（using at editing mode） */\n      beforeYM: '',\n      /** validation rule */\n      titleRules: [\n        v => v.trim().length > 0 || 'Title is required.',\n        v => v.length <= 20 || 'Less than 20 characters'\n      ],\n      tagRule: v => v.length <= 5 || '5 tags are maximum.',\n      amountRules: [\n        v => v >= 0 || 'Need to be more than 0',\n        v => Number.isInteger(v) || 'Need to be integer'\n      ],\n      memoRule: v => v.length <= 50 || 'Less than 50 characters'\n    }\n  },\n  computed: {\n    ...mapGetters([\n      /** income category */\n      'incomeItems',\n      'outgoItems',\n      /** tag */\n      'tagItems'\n    ]),\n    /** dialog title */\n    titleText () {\n      return this.actionType === 'add' ? 'Add' : 'Edit'\n    },\n    /** dialog action */\n    actionText () {\n      return this.actionType === 'add' ? 'Add' : 'edit'\n    }\n  },\n  methods: {\n    ...mapActions([\n      /** add data */\n      'addAbData',\n      /** update data */\n      'updateAbData'\n    ]),\n    /**\n     * Show the dialog\n     * This method is called by the parent\n     */\n    open (actionType, item) {\n      this.show = true\n      this.actionType = actionType\n      this.resetForm(item)\n      if (actionType === 'edit') {\n        this.beforeYM = item.date.slice(0, 7)\n      }\n    },\n    /** To cancel */\n    onClickClose () {\n      this.show = false\n    },\n    /** To add or edit */\n    onClickAction () {\n      const item = {\n        date: this.date,\n        title: this.title,\n        category: this.category,\n        tags: this.tags.join(','),\n        memo: this.memo,\n        income: null,\n        outgo: null\n      }\n      item[this.inout] = this.amount || 0\n      if (this.actionType === 'add') {\n        item.id = Math.random().toString(36).slice(-8) // ランダムな8文字のIDを生成\n        this.addAbData({ item })\n      } else {\n        item.id = this.id\n        this.updateAbData({ beforeYM: this.beforeYM, item })\n      }\n      this.show = false\n    },\n    /** if change the balance */\n    onChangeInout () {\n      if (this.inout === 'income') {\n        this.categoryItems = this.incomeItems\n      } else {\n        this.categoryItems = this.outgoItems\n      }\n      this.category = this.categoryItems[0]\n    },\n    /** initialize the form */\n    resetForm (item = {}) {\n      const today = new Date()\n      const year = today.getFullYear()\n      const month = ('0' + (today.getMonth() + 1)).slice(-2)\n      const date = ('0' + today.getDate()).slice(-2)\n      this.id = item.id || ''\n      this.date = item.date || `${year}-${month}-${date}`\n      this.title = item.title || ''\n      this.inout = item.income != null ? 'income' : 'outgo'\n      if (this.inout === 'income') {\n        this.categoryItems = this.incomeItems\n        this.amount = item.income || 0\n      } else {\n        this.categoryItems = this.outgoItems\n        this.amount = item.outgo || 0\n      }\n      this.category = item.category || this.categoryItems[0]\n      this.tags = item.tags ? item.tags.split(',') : []\n      this.memo = item.memo || ''\n      this.$refs.form.resetValidation()\n    }\n  }\n}\n</script>"]}]}